if platform == "win32":
	target="libxmmsclient"
else:
	target="xmmsclient"
systemlibrary=True

source=["ipc.c", 
	"medialib.c", 
	"config.c", 
	"collection.c", 
	"collparser.c", 
	"stats.c", 
	"playback.c", 
	"playlist.c", 
	"result.c", 
	"xqueue.c",
	"xmmsclient.c",
	"bindata.c"]

def config(env):
	env.Append(LIBS=["xmmsipc"])
	env.Append(LIBS=["xmmssocket"])
	env.Append(LIBS=["xmmstypes"])
	if env.platform == 'win32':
		env["SHLIBPREFIX"] = ""
		env.Append(LIBS=["ws2_32"])
		env.Append(LINKFLAGS=["/DEF:src/clients/lib/xmmsclient/xmmsclient.def"])
	elif env.platform == 'sunos5':
		env.checklib("socket", "socket", fail=True)
	env.Append(CPPPATH=["#src/includepriv"])
	env.Prepend(LIBPATH="src/lib/xmmsipc")
	env.Prepend(LIBPATH="src/lib/xmmssocket")
	env.Prepend(LIBPATH="src/lib/xmmstypes")
	env.Append(CPPFLAGS=['-DUSERCONFDIR=\\"'+env.userconfpath+'\\"'])
